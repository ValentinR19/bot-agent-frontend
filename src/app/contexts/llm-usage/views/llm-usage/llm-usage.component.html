<app-page-header title="Uso de LLM" subtitle="Tracking de costos y uso de modelos de lenguaje" icon="dollar"> </app-page-header>

<div class="stats-grid">
  <p-card>
    <div class="stat-item">
      <span class="stat-label">Costo Total</span>
      <span class="stat-value">${{ totalStats.totalCost }}</span>
    </div>
  </p-card>

  <p-card>
    <div class="stat-item">
      <span class="stat-label">Tokens Totales</span>
      <span class="stat-value">{{ totalStats.totalTokens }}</span>
    </div>
  </p-card>

  <p-card>
    <div class="stat-item">
      <span class="stat-label">Costo Promedio</span>
      <span class="stat-value">${{ totalStats.avgCostPerRequest }}</span>
    </div>
  </p-card>
</div>

<p-card>
  <h3>Historial de Uso</h3>
  <p-table [value]="usageData" [paginator]="true" [rows]="10">
    <ng-template pTemplate="header">
      <tr>
        <th>Fecha</th>
        <th>Modelo</th>
        <th>Tokens de Prompt</th>
        <th>Tokens de Completado</th>
        <th>Total de Tokens</th>
        <th>Costo (USD)</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>
        <td>{{ item.date | date: 'short' }}</td>
        <td>
          <p-tag [value]="item.model" severity="info"></p-tag>
        </td>
        <td>{{ item.promptTokens }}</td>
        <td>{{ item.completionTokens }}</td>
        <td>{{ item.totalTokens }}</td>
        <td>${{ item.cost }}</td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
