<header class="topbar">
  <div class="topbar-left">
    <button pButton type="button" icon="pi pi-bars" class="p-button-text p-button-rounded" (click)="onToggleSidebar()"></button>

    <h2 class="topbar-title">Bot Agent Platform</h2>
  </div>

  <div class="topbar-right">
    <!-- Selector de Tenant (solo para super admins) -->
    <div class="tenant-selector" #overlayHost *ngIf="isSuperAdmin">
      <p-select
        [options]="availableTenants"
        [(ngModel)]="selectedTenantId"
        optionLabel="name"
        optionValue="id"
        placeholder="'currentTenantName'"
        (onChange)="onTenantChange($event)"
        [class]="'tenant-dropdown'"
      >
        <ng-template pTemplate="selectedItem">
          <div class="tenant-item" *ngIf="selectedTenantId">
            <i class="pi pi-building"></i>
            <span>{{ currentTenantName }}</span>
          </div>
        </ng-template>
        <ng-template let-tenant pTemplate="item">
          <div class="tenant-item">
            <i class="pi pi-building"></i>
            <span>{{ tenant.name }}</span>
          </div>
        </ng-template>
      </p-select>
    </div>

    <!-- Notificaciones -->
    <button pButton type="button" icon="pi pi-bell" class="p-button-text p-button-rounded" badge="3" badgeClass="p-badge-danger"></button>

    <!-- Usuario -->
    <div class="user-menu">
      <button pButton type="button" class="p-button-text user-button" #userMenuButton>
        <div class="user-info">
          <span class="user-name">{{ userName }}</span>
          <span class="user-email">{{ userEmail }}</span>
        </div>
        <i class="pi pi-angle-down"></i>
      </button>

      <p-menu #menu [model]="userMenuItems" [popup]="true"> </p-menu>

      <button pButton type="button" icon="pi pi-user" class="p-button-text p-button-rounded" (click)="menu.toggle($event)"></button>
    </div>
  </div>
</header>
