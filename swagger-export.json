{
  "openapi": "3.0.0",
  "paths": {
    "/api/v1/tenants": {
      "get": {
        "operationId": "TenantController_findAll",
        "summary": "Listar todos los tenants",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de tenants retornada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TenantResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Tenants"
        ]
      },
      "post": {
        "operationId": "TenantController_create",
        "summary": "Crear un nuevo tenant",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTenantDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tenant creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "409": {
            "description": "Slug ya existe"
          }
        },
        "tags": [
          "Tenants"
        ]
      }
    },
    "/api/v1/tenants/{id}": {
      "get": {
        "operationId": "TenantController_findOne",
        "summary": "Obtener un tenant por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del tenant (UUID)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tenant encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Tenant no encontrado"
          }
        },
        "tags": [
          "Tenants"
        ]
      },
      "put": {
        "operationId": "TenantController_update",
        "summary": "Actualizar un tenant",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del tenant (UUID)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTenantDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tenant actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Tenant no encontrado"
          },
          "409": {
            "description": "Slug ya existe"
          }
        },
        "tags": [
          "Tenants"
        ]
      },
      "delete": {
        "operationId": "TenantController_delete",
        "summary": "Eliminar un tenant (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del tenant (UUID)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Tenant eliminado exitosamente"
          },
          "404": {
            "description": "Tenant no encontrado"
          }
        },
        "tags": [
          "Tenants"
        ]
      }
    },
    "/api/v1/tenants/slug/{slug}": {
      "get": {
        "operationId": "TenantController_findBySlug",
        "summary": "Obtener un tenant por slug",
        "parameters": [
          {
            "name": "slug",
            "required": true,
            "in": "path",
            "description": "Slug del tenant",
            "schema": {
              "example": "acme-corp",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tenant encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Tenant no encontrado"
          }
        },
        "tags": [
          "Tenants"
        ]
      }
    },
    "/api/v1/health": {
      "get": {
        "operationId": "HealthController_check",
        "summary": "Health check endpoint",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Service is healthy"
          }
        },
        "tags": [
          "Health"
        ]
      }
    },
    "/api/v1/users": {
      "get": {
        "operationId": "UserController_findAll",
        "summary": "Listar todos los usuarios del tenant",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de usuarios",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "UserController_create",
        "summary": "Crear un nuevo usuario",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "409": {
            "description": "Email ya existe"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/users/{id}": {
      "get": {
        "operationId": "UserController_findOne",
        "summary": "Obtener un usuario por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del usuario",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "UserController_update",
        "summary": "Actualizar un usuario",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuario actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "UserController_delete",
        "summary": "Eliminar un usuario (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Usuario eliminado"
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/users/{id}/roles": {
      "get": {
        "operationId": "UserController_findWithRoles",
        "summary": "Obtener usuario con sus roles",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario con roles"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/users/{id}/teams": {
      "get": {
        "operationId": "UserController_findWithTeams",
        "summary": "Obtener usuario con sus equipos",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario con equipos"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/teams": {
      "get": {
        "operationId": "TeamController_findAll",
        "summary": "Listar todos los equipos del tenant",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de equipos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TeamResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "TeamController_create",
        "summary": "Crear un nuevo equipo",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTeamDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Equipo creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TeamResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/teams/{id}": {
      "get": {
        "operationId": "TeamController_findOne",
        "summary": "Obtener un equipo por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Equipo encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TeamResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Equipo no encontrado"
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "TeamController_update",
        "summary": "Actualizar un equipo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTeamDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Equipo actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TeamResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "TeamController_delete",
        "summary": "Eliminar un equipo (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Equipo eliminado"
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/teams/{id}/members": {
      "get": {
        "operationId": "TeamController_findWithMembers",
        "summary": "Obtener equipo con sus miembros",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Equipo con miembros",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TeamResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "TeamController_addUser",
        "summary": "Agregar un usuario al equipo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del equipo",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddUserToTeamDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario agregado al equipo"
          },
          "404": {
            "description": "Equipo o usuario no encontrado"
          },
          "409": {
            "description": "Usuario ya es miembro del equipo"
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/teams/{teamId}/members/{userId}": {
      "delete": {
        "operationId": "TeamController_removeUser",
        "summary": "Remover un usuario del equipo",
        "parameters": [
          {
            "name": "teamId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Usuario removido del equipo"
          },
          "404": {
            "description": "Relación no encontrada"
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/teams/{teamId}/members/{userId}/role": {
      "put": {
        "operationId": "TeamController_updateUserRole",
        "summary": "Actualizar el rol de un usuario en el equipo",
        "parameters": [
          {
            "name": "teamId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "roleInTeam": {
                    "type": "string",
                    "enum": [
                      "member",
                      "admin",
                      "owner"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rol actualizado"
          }
        },
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/roles": {
      "get": {
        "operationId": "RoleController_findAll",
        "summary": "Listar todos los roles del tenant",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de roles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RoleResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "RoleController_create",
        "summary": "Crear un nuevo rol",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Rol creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "Nombre ya existe"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/roles/{id}": {
      "get": {
        "operationId": "RoleController_findOne",
        "summary": "Obtener un rol por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Rol encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Rol no encontrado"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "RoleController_update",
        "summary": "Actualizar un rol",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRoleDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rol actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "No se puede modificar rol del sistema"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "RoleController_delete",
        "summary": "Eliminar un rol (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Rol eliminado"
          },
          "400": {
            "description": "No se puede eliminar rol del sistema"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/roles/{id}/permissions": {
      "get": {
        "operationId": "RoleController_findWithPermissions",
        "summary": "Obtener un rol con sus permisos",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Rol con permisos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "RoleController_assignPermissions",
        "summary": "Asignar permisos a un rol",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del rol",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignPermissionDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Permisos asignados"
          },
          "400": {
            "description": "Permisos no encontrados o rol del sistema"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/roles/{roleId}/permissions/{permissionKey}": {
      "delete": {
        "operationId": "RoleController_removePermission",
        "summary": "Remover un permiso de un rol",
        "parameters": [
          {
            "name": "roleId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "permissionKey",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Permiso removido"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/roles/assign": {
      "post": {
        "operationId": "RoleController_assignRoleToUser",
        "summary": "Asignar un rol a un usuario",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignRoleToUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Rol asignado al usuario"
          },
          "409": {
            "description": "Usuario ya tiene este rol"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/roles/users/{userId}/roles/{roleId}": {
      "delete": {
        "operationId": "RoleController_removeRoleFromUser",
        "summary": "Remover un rol de un usuario",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "roleId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Rol removido del usuario"
          }
        },
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/permissions": {
      "get": {
        "operationId": "PermissionController_findAll",
        "summary": "Listar todos los permisos disponibles",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de permisos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PermissionCatalogResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Permissions"
        ]
      },
      "post": {
        "operationId": "PermissionController_create",
        "summary": "Crear un nuevo permiso",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePermissionDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Permiso creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionCatalogResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "Key ya existe"
          }
        },
        "tags": [
          "Permissions"
        ]
      }
    },
    "/api/v1/permissions/modules/{module}": {
      "get": {
        "operationId": "PermissionController_findByModule",
        "summary": "Listar permisos de un módulo específico",
        "parameters": [
          {
            "name": "module",
            "required": true,
            "in": "path",
            "description": "Nombre del módulo",
            "schema": {
              "example": "flows",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de permisos del módulo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PermissionCatalogResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Permissions"
        ]
      }
    },
    "/api/v1/permissions/{key}": {
      "get": {
        "operationId": "PermissionController_findByKey",
        "summary": "Obtener un permiso por su key",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "schema": {
              "example": "flows.create",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Permiso encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionCatalogResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Permissions"
        ]
      },
      "put": {
        "operationId": "PermissionController_update",
        "summary": "Actualizar un permiso",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "schema": {
              "example": "flows.create",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePermissionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Permiso actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionCatalogResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Permissions"
        ]
      },
      "delete": {
        "operationId": "PermissionController_delete",
        "summary": "Eliminar un permiso",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "schema": {
              "example": "flows.create",
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Permiso eliminado"
          }
        },
        "tags": [
          "Permissions"
        ]
      }
    },
    "/api/v1/permissions/seed": {
      "post": {
        "operationId": "PermissionController_seedDefault",
        "summary": "Seedear permisos por defecto (ADMIN)",
        "parameters": [],
        "responses": {
          "201": {
            "description": "Permisos por defecto creados"
          }
        },
        "tags": [
          "Permissions"
        ]
      }
    },
    "/api/v1/destinations": {
      "get": {
        "operationId": "DestinationController_findAll",
        "summary": "Listar todos los destinos",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de destinos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DestinationResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "DestinationController_create",
        "summary": "Crear un nuevo destino",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDestinationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Destino creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DestinationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Configuración inválida"
          },
          "409": {
            "description": "Nombre ya existe"
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/destinations/active": {
      "get": {
        "operationId": "DestinationController_findActive",
        "summary": "Listar destinos activos",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Destinos activos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DestinationResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/destinations/type/{type}": {
      "get": {
        "operationId": "DestinationController_findByType",
        "summary": "Listar destinos por tipo",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "schema": {
              "example": "webhook",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Destinos del tipo especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DestinationResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/destinations/{id}": {
      "get": {
        "operationId": "DestinationController_findOne",
        "summary": "Obtener un destino por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Destino encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DestinationResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Destino no encontrado"
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "DestinationController_update",
        "summary": "Actualizar un destino",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDestinationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Destino actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DestinationResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Destino no encontrado"
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "DestinationController_delete",
        "summary": "Eliminar un destino (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Destino eliminado"
          },
          "404": {
            "description": "Destino no encontrado"
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/destinations/{id}/test": {
      "post": {
        "operationId": "DestinationController_testConnection",
        "summary": "Probar conexión con el destino",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TestDestinationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resultado del test"
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/destinations/{id}/reset-stats": {
      "post": {
        "operationId": "DestinationController_resetStats",
        "summary": "Resetear estadísticas de uso del destino",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Estadísticas reseteadas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DestinationResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Destinations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/channels": {
      "get": {
        "operationId": "ChannelController_findAll",
        "summary": "Listar todos los canales",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de canales",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ChannelResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "ChannelController_create",
        "summary": "Crear un nuevo canal",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateChannelDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Canal creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChannelResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "Nombre ya existe"
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/channels/active": {
      "get": {
        "operationId": "ChannelController_findActive",
        "summary": "Listar canales activos",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Canales activos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ChannelResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/channels/type/{type}": {
      "get": {
        "operationId": "ChannelController_findByType",
        "summary": "Listar canales por tipo",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "schema": {
              "example": "telegram",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Canales del tipo especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ChannelResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/channels/{id}": {
      "get": {
        "operationId": "ChannelController_findOne",
        "summary": "Obtener un canal por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Canal encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChannelResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Canal no encontrado"
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "ChannelController_update",
        "summary": "Actualizar un canal",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateChannelDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Canal actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChannelResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Canal no encontrado"
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "ChannelController_delete",
        "summary": "Eliminar un canal (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Canal eliminado"
          },
          "404": {
            "description": "Canal no encontrado"
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/channels/{id}/telegram/setup": {
      "post": {
        "operationId": "ChannelController_setupTelegram",
        "summary": "Configurar Telegram para un canal",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del canal",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetupTelegramDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Telegram configurado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChannelResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Token inválido o canal no es Telegram"
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/channels/{id}/telegram/config": {
      "put": {
        "operationId": "ChannelController_updateTelegramConfig",
        "summary": "Actualizar configuración de Telegram",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTelegramConfigDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configuración actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChannelResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/channels/{id}/telegram/webhook-info": {
      "get": {
        "operationId": "ChannelController_getWebhookInfo",
        "summary": "Obtener información del webhook de Telegram",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Información del webhook"
          }
        },
        "tags": [
          "Channels"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations": {
      "get": {
        "operationId": "ConversationController_findAll",
        "summary": "Listar todas las conversaciones",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de conversaciones",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConversationResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "ConversationController_create",
        "summary": "Crear una nueva conversación",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateConversationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Conversación creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "Ya existe una conversación para este usuario en este canal"
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/status/{status}": {
      "get": {
        "operationId": "ConversationController_findByStatus",
        "summary": "Listar conversaciones por estado",
        "parameters": [
          {
            "name": "status",
            "required": true,
            "in": "path",
            "schema": {
              "enum": [
                "active",
                "paused",
                "completed",
                "abandoned"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversaciones filtradas por estado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConversationResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/channel/{channelId}": {
      "get": {
        "operationId": "ConversationController_findByChannel",
        "summary": "Listar conversaciones por canal",
        "parameters": [
          {
            "name": "channelId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversaciones del canal",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConversationResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/{id}": {
      "get": {
        "operationId": "ConversationController_findOne",
        "summary": "Obtener una conversación por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversación encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Conversación no encontrada"
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "ConversationController_update",
        "summary": "Actualizar una conversación",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateConversationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Conversación actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Conversación no encontrada"
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "ConversationController_delete",
        "summary": "Eliminar una conversación (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Conversación eliminada"
          },
          "404": {
            "description": "Conversación no encontrada"
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/{id}/context": {
      "put": {
        "operationId": "ConversationController_updateContext",
        "summary": "Actualizar contexto de una conversación",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "context": {
                    "type": "object",
                    "example": {
                      "nombre": "Juan",
                      "edad": 30
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contexto actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/{id}/flow": {
      "put": {
        "operationId": "ConversationController_setFlow",
        "summary": "Establecer flujo actual de una conversación",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "flowId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true
                  },
                  "nodeId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Flujo establecido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/{id}/complete": {
      "post": {
        "operationId": "ConversationController_markAsCompleted",
        "summary": "Marcar conversación como completada",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversación marcada como completada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/{id}/abandon": {
      "post": {
        "operationId": "ConversationController_markAsAbandoned",
        "summary": "Marcar conversación como abandonada",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversación marcada como abandonada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Conversations"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/{conversationId}/messages": {
      "get": {
        "operationId": "MessageController_findByConversation",
        "summary": "Listar mensajes de una conversación",
        "parameters": [
          {
            "name": "conversationId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Página",
            "schema": {
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Mensajes por página",
            "schema": {
              "default": 50,
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "order",
            "required": false,
            "in": "query",
            "description": "Ordenar por fecha",
            "schema": {
              "default": "DESC",
              "example": "DESC",
              "enum": [
                "ASC",
                "DESC"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mensajes de la conversación con paginación"
          }
        },
        "tags": [
          "Messages"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "MessageController_create",
        "summary": "Crear un nuevo mensaje",
        "parameters": [
          {
            "name": "conversationId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMessageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mensaje creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Conversación no encontrada"
          }
        },
        "tags": [
          "Messages"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/conversations/{conversationId}/messages/{id}": {
      "get": {
        "operationId": "MessageController_findOne",
        "summary": "Obtener un mensaje por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "conversationId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mensaje encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Mensaje no encontrado"
          }
        },
        "tags": [
          "Messages"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog": {
      "get": {
        "operationId": "CatalogItemController_findAll",
        "summary": "Listar todos los items del catálogo",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de items del catálogo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CatalogItemResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "CatalogItemController_create",
        "summary": "Crear un nuevo item en el catálogo",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCatalogItemDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Item creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CatalogItemResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "SKU ya existe"
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog/search": {
      "get": {
        "operationId": "CatalogItemController_search",
        "summary": "Buscar items en el catálogo con filtros",
        "parameters": [
          {
            "name": "q",
            "required": false,
            "in": "query",
            "description": "Texto de búsqueda (busca en title, description, sku)",
            "schema": {
              "example": "iphone",
              "type": "string"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "Filtrar por tipo",
            "schema": {
              "example": "product",
              "type": "string"
            }
          },
          {
            "name": "tags",
            "required": false,
            "in": "query",
            "description": "Filtrar por tags (AND)",
            "schema": {
              "example": [
                "smartphone",
                "apple"
              ],
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "Solo items activos",
            "schema": {
              "default": true,
              "type": "boolean"
            }
          },
          {
            "name": "isFeatured",
            "required": false,
            "in": "query",
            "description": "Solo items destacados",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "minPrice",
            "required": false,
            "in": "query",
            "description": "Precio mínimo",
            "schema": {
              "example": 100,
              "type": "number"
            }
          },
          {
            "name": "maxPrice",
            "required": false,
            "in": "query",
            "description": "Precio máximo",
            "schema": {
              "example": 2000,
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Página (para paginación)",
            "schema": {
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Items por página",
            "schema": {
              "default": 20,
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados de búsqueda"
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog/featured": {
      "get": {
        "operationId": "CatalogItemController_findFeatured",
        "summary": "Listar items destacados",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Items destacados",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CatalogItemResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog/type/{type}": {
      "get": {
        "operationId": "CatalogItemController_findByType",
        "summary": "Listar items por tipo",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "schema": {
              "example": "product",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Items del tipo especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CatalogItemResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog/sku/{sku}": {
      "get": {
        "operationId": "CatalogItemController_findBySku",
        "summary": "Buscar item por SKU",
        "parameters": [
          {
            "name": "sku",
            "required": true,
            "in": "path",
            "schema": {
              "example": "IPHONE-15-PRO-256-BLK",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Item encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CatalogItemResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Item no encontrado"
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog/{id}": {
      "get": {
        "operationId": "CatalogItemController_findOne",
        "summary": "Obtener un item del catálogo por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Item encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CatalogItemResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Item no encontrado"
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "CatalogItemController_update",
        "summary": "Actualizar un item del catálogo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCatalogItemDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CatalogItemResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Item no encontrado"
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "CatalogItemController_delete",
        "summary": "Eliminar un item del catálogo (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Item eliminado"
          },
          "404": {
            "description": "Item no encontrado"
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog/{id}/stock": {
      "put": {
        "operationId": "CatalogItemController_updateStock",
        "summary": "Actualizar stock de un item",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "stock": {
                    "type": "number",
                    "example": 100
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stock actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CatalogItemResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/catalog/sync/{externalSystem}": {
      "post": {
        "operationId": "CatalogItemController_sync",
        "summary": "Sincronizar items desde un sistema externo",
        "parameters": [
          {
            "name": "externalSystem",
            "required": true,
            "in": "path",
            "schema": {
              "example": "shopify",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sincronización completada"
          }
        },
        "tags": [
          "Catalog"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents": {
      "get": {
        "operationId": "KnowledgeDocumentController_findAll",
        "summary": "Listar todos los documentos de conocimiento",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de documentos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "KnowledgeDocumentController_create",
        "summary": "Crear un nuevo documento de conocimiento (ingesta manual de texto)",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateKnowledgeDocumentDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Documento creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents/type/{type}": {
      "get": {
        "operationId": "KnowledgeDocumentController_findByType",
        "summary": "Listar documentos por tipo",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "schema": {
              "enum": [
                "faq",
                "product_catalog",
                "manual",
                "policy",
                "general"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Documentos del tipo especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents/status/{status}": {
      "get": {
        "operationId": "KnowledgeDocumentController_findByStatus",
        "summary": "Listar documentos por estado",
        "parameters": [
          {
            "name": "status",
            "required": true,
            "in": "path",
            "schema": {
              "enum": [
                "pending",
                "processing",
                "completed",
                "failed"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Documentos con el estado especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents/search": {
      "get": {
        "operationId": "KnowledgeDocumentController_findByTags",
        "summary": "Buscar documentos por tags",
        "parameters": [
          {
            "name": "tags",
            "required": true,
            "in": "query",
            "description": "Tags separados por comas",
            "schema": {
              "example": "faq,soporte",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Documentos que contienen los tags especificados",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents/{id}": {
      "get": {
        "operationId": "KnowledgeDocumentController_findOne",
        "summary": "Obtener un documento por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Documento encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Documento no encontrado"
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "KnowledgeDocumentController_update",
        "summary": "Actualizar un documento",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateKnowledgeDocumentDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Documento actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Documento no encontrado"
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "KnowledgeDocumentController_delete",
        "summary": "Eliminar un documento (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Documento eliminado"
          },
          "404": {
            "description": "Documento no encontrado"
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents/{id}/with-chunks": {
      "get": {
        "operationId": "KnowledgeDocumentController_findWithChunks",
        "summary": "Obtener un documento con sus chunks",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Documento con chunks",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeDocumentResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents/upload": {
      "post": {
        "operationId": "KnowledgeDocumentController_uploadDocument",
        "summary": "Upload documento para procesamiento automático (PDF, TXT, CSV)",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "faq",
                      "product_catalog",
                      "manual",
                      "policy",
                      "general"
                    ],
                    "default": "general"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Documento subido y encolado para procesamiento"
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/knowledge/documents/{id}/process": {
      "post": {
        "operationId": "KnowledgeDocumentController_process",
        "summary": "Procesar documento (chunking + embeddings)",
        "description": "Encola el documento para procesamiento asíncrono con BullMQ",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Documento encolado para procesamiento"
          }
        },
        "tags": [
          "Knowledge Base"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/llm/health": {
      "get": {
        "operationId": "LLMHealthController_healthCheck",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/api/v1/llm/test": {
      "get": {
        "operationId": "LLMHealthController_testConnection",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/api/v1/llm/test-embeddings": {
      "get": {
        "operationId": "LLMHealthController_testEmbeddings",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/api/v1/flows": {
      "get": {
        "operationId": "FlowController_findAll",
        "summary": "Listar todos los flujos",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de flujos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FlowResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "FlowController_create",
        "summary": "Crear un nuevo flujo",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFlowDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Flujo creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "Slug ya existe"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/active": {
      "get": {
        "operationId": "FlowController_findActive",
        "summary": "Listar flujos activos",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Flujos activos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FlowResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/search": {
      "get": {
        "operationId": "FlowController_findByKeyword",
        "summary": "Buscar flujos por palabra clave",
        "parameters": [
          {
            "name": "keyword",
            "required": true,
            "in": "query",
            "schema": {
              "example": "proveedor",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Flujos que contienen la palabra clave",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FlowResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/slug/{slug}": {
      "get": {
        "operationId": "FlowController_findBySlug",
        "summary": "Obtener un flujo por slug",
        "parameters": [
          {
            "name": "slug",
            "required": true,
            "in": "path",
            "schema": {
              "example": "ingreso-proveedores",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Flujo encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Flujo no encontrado"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{id}": {
      "get": {
        "operationId": "FlowController_findOne",
        "summary": "Obtener un flujo por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Flujo encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Flujo no encontrado"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "FlowController_update",
        "summary": "Actualizar un flujo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFlowDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Flujo actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Flujo no encontrado"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "FlowController_delete",
        "summary": "Eliminar un flujo (soft delete)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Flujo eliminado"
          },
          "404": {
            "description": "Flujo no encontrado"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{id}/with-nodes": {
      "get": {
        "operationId": "FlowController_findWithNodes",
        "summary": "Obtener un flujo con sus nodos",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Flujo con nodos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{id}/full": {
      "get": {
        "operationId": "FlowController_findWithNodesAndTransitions",
        "summary": "Obtener un flujo completo (con nodos y transiciones)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Flujo completo con nodos y transiciones"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{id}/validate": {
      "post": {
        "operationId": "FlowController_validate",
        "summary": "Validar un flujo (detectar errores y warnings)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resultado de la validación",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "isValid": {
                      "type": "boolean",
                      "example": true
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{id}/clone": {
      "post": {
        "operationId": "FlowController_clone",
        "summary": "Clonar un flujo existente",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del flujo a clonar",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Ingreso de Proveedores (Copia)"
                  },
                  "slug": {
                    "type": "string",
                    "example": "ingreso-proveedores-copia"
                  }
                },
                "required": [
                  "name",
                  "slug"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Flujo clonado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Flujo original no encontrado"
          },
          "409": {
            "description": "Slug ya existe"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{id}/export": {
      "get": {
        "operationId": "FlowController_export",
        "summary": "Exportar un flujo a formato JSON",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Flujo exportado en formato JSON"
          }
        },
        "tags": [
          "Flows"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{flowId}/nodes": {
      "get": {
        "operationId": "FlowNodeController_findAll",
        "summary": "Listar todos los nodos de un flujo",
        "parameters": [
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de nodos del flujo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FlowNodeResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Flow Nodes"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "FlowNodeController_create",
        "summary": "Crear un nuevo nodo en el flujo",
        "parameters": [
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFlowNodeDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Nodo creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowNodeResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Configuración inválida"
          },
          "404": {
            "description": "Flujo no encontrado"
          }
        },
        "tags": [
          "Flow Nodes"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{flowId}/nodes/{id}": {
      "get": {
        "operationId": "FlowNodeController_findOne",
        "summary": "Obtener un nodo por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Nodo encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowNodeResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Nodo no encontrado"
          }
        },
        "tags": [
          "Flow Nodes"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "FlowNodeController_update",
        "summary": "Actualizar un nodo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFlowNodeDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Nodo actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowNodeResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Nodo no encontrado"
          }
        },
        "tags": [
          "Flow Nodes"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "FlowNodeController_delete",
        "summary": "Eliminar un nodo",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Nodo eliminado"
          },
          "400": {
            "description": "No se puede eliminar el nodo inicial"
          },
          "404": {
            "description": "Nodo no encontrado"
          }
        },
        "tags": [
          "Flow Nodes"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{flowId}/nodes/{id}/with-transitions": {
      "get": {
        "operationId": "FlowNodeController_findWithTransitions",
        "summary": "Obtener un nodo con sus transiciones",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Nodo con transiciones"
          }
        },
        "tags": [
          "Flow Nodes"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{flowId}/transitions": {
      "get": {
        "operationId": "FlowTransitionController_findAll",
        "summary": "Listar todas las transiciones de un flujo",
        "parameters": [
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de transiciones del flujo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FlowTransitionResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Flow Transitions"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "post": {
        "operationId": "FlowTransitionController_create",
        "summary": "Crear una nueva transición",
        "parameters": [
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFlowTransitionDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Transición creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowTransitionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Nodos inválidos o bucle infinito detectado"
          },
          "404": {
            "description": "Flujo o nodo no encontrado"
          }
        },
        "tags": [
          "Flow Transitions"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{flowId}/transitions/node/{nodeId}": {
      "get": {
        "operationId": "FlowTransitionController_findByFromNode",
        "summary": "Listar transiciones salientes de un nodo",
        "parameters": [
          {
            "name": "nodeId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transiciones que salen del nodo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FlowTransitionResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Flow Transitions"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    },
    "/api/v1/flows/{flowId}/transitions/{id}": {
      "get": {
        "operationId": "FlowTransitionController_findOne",
        "summary": "Obtener una transición por ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transición encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowTransitionResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Transición no encontrada"
          }
        },
        "tags": [
          "Flow Transitions"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "put": {
        "operationId": "FlowTransitionController_update",
        "summary": "Actualizar una transición",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFlowTransitionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transición actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowTransitionResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Transición no encontrada"
          }
        },
        "tags": [
          "Flow Transitions"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      },
      "delete": {
        "operationId": "FlowTransitionController_delete",
        "summary": "Eliminar una transición",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flowId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Transición eliminada"
          },
          "404": {
            "description": "Transición no encontrada"
          }
        },
        "tags": [
          "Flow Transitions"
        ],
        "security": [
          {
            "tenant-id": []
          }
        ]
      }
    }
  },
  "info": {
    "title": "Bot Agent Platform",
    "description": "",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "schemas": {
      "TenantResponseDto": {
        "type": "object",
        "properties": {}
      },
      "CreateTenantDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del tenant",
            "example": "Acme Corporation",
            "minLength": 3,
            "maxLength": 255
          },
          "slug": {
            "type": "string",
            "description": "Slug único del tenant (usado en subdominios)",
            "example": "acme-corp",
            "pattern": "^[a-z0-9-]+$"
          },
          "contactEmail": {
            "type": "string",
            "description": "Email de contacto del tenant",
            "example": "contact@acme.com"
          },
          "contactPhone": {
            "type": "string",
            "description": "Teléfono de contacto",
            "example": "+54 11 1234-5678"
          },
          "logoUrl": {
            "type": "string",
            "description": "URL del logo del tenant",
            "example": "https://acme.com/logo.png"
          },
          "primaryColor": {
            "type": "string",
            "description": "Color primario (formato hex)",
            "example": "#FF5733",
            "pattern": "^#[0-9A-Fa-f]{6}$"
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional en formato JSON",
            "example": {
              "industry": "E-commerce",
              "employees": 50
            }
          },
          "llmProvider": {
            "type": "string",
            "description": "Proveedor LLM (openai, anthropic, etc)",
            "example": "openai"
          },
          "llmApiKey": {
            "type": "string",
            "description": "API Key del proveedor LLM",
            "example": "sk-..."
          },
          "timezone": {
            "type": "string",
            "description": "Zona horaria",
            "example": "America/Argentina/Buenos_Aires",
            "default": "UTC"
          },
          "language": {
            "type": "string",
            "description": "Idioma principal",
            "example": "es",
            "default": "es"
          }
        },
        "required": [
          "name",
          "slug"
        ]
      },
      "UpdateTenantDto": {
        "type": "object",
        "properties": {}
      },
      "UserResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "fullName": {
            "type": "string"
          },
          "avatarUrl": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "isSuperAdmin": {
            "type": "boolean"
          },
          "lastLoginAt": {
            "format": "date-time",
            "type": "string"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "email",
          "fullName",
          "isActive",
          "isSuperAdmin",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateUserDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email del usuario (único)",
            "example": "juan.perez@acme.com"
          },
          "password": {
            "type": "string",
            "description": "Contraseña segura del usuario (mín 8 chars, mayúsculas, minúsculas, números y símbolos)",
            "example": "SecureP@ssw0rd!",
            "minLength": 8
          },
          "fullName": {
            "type": "string",
            "description": "Nombre completo del usuario",
            "example": "Juan Pérez"
          },
          "avatarUrl": {
            "type": "string",
            "description": "URL del avatar del usuario",
            "example": "https://avatar.com/juan.jpg"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el usuario está activo",
            "example": true,
            "default": true
          },
          "isSuperAdmin": {
            "type": "boolean",
            "description": "Si el usuario es super administrador",
            "example": false,
            "default": false
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "department": "IT",
              "position": "Developer"
            }
          }
        },
        "required": [
          "email",
          "password",
          "fullName"
        ]
      },
      "UpdateUserDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email del usuario (único)",
            "example": "juan.perez@acme.com"
          },
          "fullName": {
            "type": "string",
            "description": "Nombre completo del usuario",
            "example": "Juan Pérez"
          },
          "avatarUrl": {
            "type": "string",
            "description": "URL del avatar del usuario",
            "example": "https://avatar.com/juan.jpg"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el usuario está activo",
            "example": true,
            "default": true
          },
          "isSuperAdmin": {
            "type": "boolean",
            "description": "Si el usuario es super administrador",
            "example": false,
            "default": false
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "department": "IT",
              "position": "Developer"
            }
          },
          "password": {
            "type": "string",
            "description": "Nueva contraseña (si se desea cambiar)"
          },
          "lastLoginAt": {
            "format": "date-time",
            "type": "string",
            "description": "Último login"
          }
        }
      },
      "TeamMemberResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "roleInTeam": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponseDto"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "roleInTeam",
          "user",
          "createdAt"
        ]
      },
      "TeamResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          },
          "members": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TeamMemberResponseDto"
            }
          }
        },
        "required": [
          "id",
          "name",
          "isActive",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateTeamDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del equipo",
            "example": "Equipo de Ventas"
          },
          "description": {
            "type": "string",
            "description": "Descripción del equipo",
            "example": "Equipo encargado de las ventas B2B"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el equipo está activo",
            "default": true
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "region": "LATAM",
              "target": 1000000
            }
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateTeamDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del equipo",
            "example": "Equipo de Ventas"
          },
          "description": {
            "type": "string",
            "description": "Descripción del equipo",
            "example": "Equipo encargado de las ventas B2B"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el equipo está activo",
            "default": true
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "region": "LATAM",
              "target": 1000000
            }
          }
        }
      },
      "AddUserToTeamDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "ID del usuario",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "roleInTeam": {
            "type": "string",
            "description": "Rol del usuario en el equipo",
            "example": "member",
            "enum": [
              "member",
              "admin",
              "owner"
            ],
            "default": "member"
          }
        },
        "required": [
          "userId"
        ]
      },
      "PermissionResponseDto": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "module": {
            "type": "string"
          }
        },
        "required": [
          "key",
          "description",
          "module"
        ]
      },
      "RolePermissionResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "permissionKey": {
            "type": "string"
          },
          "permission": {
            "$ref": "#/components/schemas/PermissionResponseDto"
          }
        },
        "required": [
          "id",
          "permissionKey",
          "permission"
        ]
      },
      "RoleResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "isSystem": {
            "type": "boolean"
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          },
          "permissions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RolePermissionResponseDto"
            }
          }
        },
        "required": [
          "id",
          "name",
          "isSystem",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateRoleDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del rol",
            "example": "Administrador de Ventas"
          },
          "description": {
            "type": "string",
            "description": "Descripción del rol",
            "example": "Puede gestionar todo lo relacionado con ventas"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el rol está activo",
            "default": true
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateRoleDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del rol",
            "example": "Administrador de Ventas"
          },
          "description": {
            "type": "string",
            "description": "Descripción del rol",
            "example": "Puede gestionar todo lo relacionado con ventas"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el rol está activo",
            "default": true
          }
        }
      },
      "AssignPermissionDto": {
        "type": "object",
        "properties": {
          "permissionKeys": {
            "description": "Keys de permisos a asignar",
            "example": [
              "flows.create",
              "flows.read",
              "conversations.read"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "permissionKeys"
        ]
      },
      "AssignRoleToUserDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "ID del usuario",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "roleId": {
            "type": "string",
            "description": "ID del rol",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          }
        },
        "required": [
          "userId",
          "roleId"
        ]
      },
      "PermissionCatalogResponseDto": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "module": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "key",
          "description",
          "module",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreatePermissionDto": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "Key única del permiso (formato: modulo.accion)",
            "example": "flows.create",
            "pattern": "^[a-z_]+\\.[a-z_]+$"
          },
          "description": {
            "type": "string",
            "description": "Descripción del permiso",
            "example": "Permite crear flujos de conversación"
          },
          "module": {
            "type": "string",
            "description": "Módulo al que pertenece",
            "example": "flows"
          }
        },
        "required": [
          "key",
          "description",
          "module"
        ]
      },
      "UpdatePermissionDto": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "description": "Descripción del permiso",
            "example": "Permite crear flujos de conversación"
          },
          "module": {
            "type": "string",
            "description": "Módulo al que pertenece",
            "example": "flows"
          }
        }
      },
      "DestinationResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "config": {
            "type": "object"
          },
          "retryConfig": {
            "type": "object"
          },
          "rateLimit": {
            "type": "object"
          },
          "metadata": {
            "type": "object"
          },
          "lastUsedAt": {
            "format": "date-time",
            "type": "string"
          },
          "totalCalls": {
            "type": "number"
          },
          "totalErrors": {
            "type": "number"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "type",
          "isActive",
          "config",
          "metadata",
          "totalCalls",
          "totalErrors",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateDestinationDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre descriptivo del destino",
            "example": "Webhook de Notificaciones"
          },
          "type": {
            "type": "string",
            "description": "Tipo de destino",
            "example": "webhook",
            "enum": [
              "email",
              "webhook",
              "api",
              "crm",
              "erp",
              "slack",
              "whatsapp_business",
              "zapier",
              "make",
              "custom"
            ]
          },
          "description": {
            "type": "string",
            "description": "Descripción del destino",
            "example": "Envía notificaciones a nuestro sistema CRM"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el destino está activo",
            "default": true
          },
          "config": {
            "type": "object",
            "description": "Configuración específica del destino",
            "example": {
              "url": "https://hooks.example.com/webhook",
              "method": "POST",
              "headers": {
                "X-API-Key": "secret123"
              }
            }
          },
          "retryConfig": {
            "type": "object",
            "description": "Configuración de reintentos",
            "example": {
              "max_retries": 3,
              "retry_delay": 5000,
              "exponential_backoff": true
            }
          },
          "rateLimit": {
            "type": "object",
            "description": "Configuración de rate limiting",
            "example": {
              "requests_per_minute": 60,
              "requests_per_hour": 1000
            }
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "team": "Sales",
              "priority": "high"
            }
          }
        },
        "required": [
          "name",
          "type",
          "config"
        ]
      },
      "UpdateDestinationDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre descriptivo del destino",
            "example": "Webhook de Notificaciones"
          },
          "type": {
            "type": "string",
            "description": "Tipo de destino",
            "example": "webhook",
            "enum": [
              "email",
              "webhook",
              "api",
              "crm",
              "erp",
              "slack",
              "whatsapp_business",
              "zapier",
              "make",
              "custom"
            ]
          },
          "description": {
            "type": "string",
            "description": "Descripción del destino",
            "example": "Envía notificaciones a nuestro sistema CRM"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el destino está activo",
            "default": true
          },
          "config": {
            "type": "object",
            "description": "Configuración específica del destino",
            "example": {
              "url": "https://hooks.example.com/webhook",
              "method": "POST",
              "headers": {
                "X-API-Key": "secret123"
              }
            }
          },
          "retryConfig": {
            "type": "object",
            "description": "Configuración de reintentos",
            "example": {
              "max_retries": 3,
              "retry_delay": 5000,
              "exponential_backoff": true
            }
          },
          "rateLimit": {
            "type": "object",
            "description": "Configuración de rate limiting",
            "example": {
              "requests_per_minute": 60,
              "requests_per_hour": 1000
            }
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "team": "Sales",
              "priority": "high"
            }
          }
        }
      },
      "TestDestinationDto": {
        "type": "object",
        "properties": {
          "testPayload": {
            "type": "object",
            "description": "Datos de prueba a enviar",
            "example": {
              "message": "Test from Bot Agent Platform",
              "timestamp": "2024-01-15T10:30:00Z"
            }
          }
        }
      },
      "TelegramConfigResponseDto": {
        "type": "object",
        "properties": {
          "botUsername": {
            "type": "string"
          },
          "webhookUrl": {
            "type": "string"
          },
          "isWebhookSet": {
            "type": "boolean"
          },
          "allowedUpdates": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "maxConnections": {
            "type": "number"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "botUsername",
          "webhookUrl",
          "isWebhookSet",
          "allowedUpdates",
          "createdAt",
          "updatedAt"
        ]
      },
      "ChannelResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          },
          "telegramConfig": {
            "$ref": "#/components/schemas/TelegramConfigResponseDto"
          }
        },
        "required": [
          "id",
          "type",
          "name",
          "isActive",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateChannelDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo de canal",
            "example": "telegram",
            "enum": [
              "telegram",
              "whatsapp",
              "instagram",
              "webchat",
              "api"
            ]
          },
          "name": {
            "type": "string",
            "description": "Nombre descriptivo del canal",
            "example": "Bot de Soporte - Telegram"
          },
          "description": {
            "type": "string",
            "description": "Descripción del canal",
            "example": "Canal principal para atención al cliente"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el canal está activo",
            "default": true
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "priority": "high",
              "department": "support"
            }
          }
        },
        "required": [
          "type",
          "name"
        ]
      },
      "UpdateChannelDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo de canal",
            "example": "telegram",
            "enum": [
              "telegram",
              "whatsapp",
              "instagram",
              "webchat",
              "api"
            ]
          },
          "name": {
            "type": "string",
            "description": "Nombre descriptivo del canal",
            "example": "Bot de Soporte - Telegram"
          },
          "description": {
            "type": "string",
            "description": "Descripción del canal",
            "example": "Canal principal para atención al cliente"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el canal está activo",
            "default": true
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "priority": "high",
              "department": "support"
            }
          }
        }
      },
      "SetupTelegramDto": {
        "type": "object",
        "properties": {
          "botToken": {
            "type": "string",
            "description": "Token del bot de Telegram (de @BotFather)",
            "example": "123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
          },
          "webhookSecret": {
            "type": "string",
            "description": "Secret para validar webhooks (opcional pero recomendado)",
            "example": "my-super-secret-key-123"
          },
          "allowedUpdates": {
            "description": "Tipos de updates a recibir",
            "example": [
              "message",
              "callback_query"
            ],
            "default": [
              "message",
              "callback_query"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "maxConnections": {
            "type": "number",
            "description": "Máximo de conexiones simultáneas al webhook (1-100)",
            "example": 40
          }
        },
        "required": [
          "botToken"
        ]
      },
      "UpdateTelegramConfigDto": {
        "type": "object",
        "properties": {
          "webhookSecret": {
            "type": "string",
            "description": "Secret para validar webhooks (opcional pero recomendado)",
            "example": "my-super-secret-key-123"
          },
          "allowedUpdates": {
            "description": "Tipos de updates a recibir",
            "example": [
              "message",
              "callback_query"
            ],
            "default": [
              "message",
              "callback_query"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "maxConnections": {
            "type": "number",
            "description": "Máximo de conexiones simultáneas al webhook (1-100)",
            "example": 40
          }
        }
      },
      "ConversationResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "channelId": {
            "type": "string"
          },
          "externalUserId": {
            "type": "string"
          },
          "externalUserName": {
            "type": "string"
          },
          "currentFlowId": {
            "type": "string"
          },
          "currentNodeId": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "context": {
            "type": "object"
          },
          "lastMessageAt": {
            "format": "date-time",
            "type": "string"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "channelId",
          "externalUserId",
          "status",
          "context",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateConversationDto": {
        "type": "object",
        "properties": {
          "channelId": {
            "type": "string",
            "description": "ID del canal",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "externalUserId": {
            "type": "string",
            "description": "ID del usuario en el canal externo",
            "example": "123456789"
          },
          "externalUserName": {
            "type": "string",
            "description": "Nombre del usuario en el canal externo",
            "example": "Juan Pérez"
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "source": "telegram",
              "user_language": "es"
            }
          }
        },
        "required": [
          "channelId",
          "externalUserId"
        ]
      },
      "UpdateConversationDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "Estado de la conversación",
            "example": "active",
            "enum": [
              "active",
              "paused",
              "completed",
              "abandoned"
            ]
          },
          "currentFlowId": {
            "type": "string",
            "description": "ID del flujo actual"
          },
          "currentNodeId": {
            "type": "string",
            "description": "ID del nodo actual"
          },
          "context": {
            "type": "object",
            "description": "Contexto/variables del flujo",
            "example": {
              "nombre": "Juan",
              "edad": 30
            }
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional"
          }
        }
      },
      "MessageResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "conversationId": {
            "type": "string"
          },
          "sender": {
            "type": "string"
          },
          "text": {
            "type": "string"
          },
          "messageType": {
            "type": "string"
          },
          "payload": {
            "type": "object"
          },
          "externalMessageId": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "conversationId",
          "sender",
          "text",
          "messageType",
          "payload",
          "metadata",
          "createdAt"
        ]
      },
      "CreateMessageDto": {
        "type": "object",
        "properties": {
          "conversationId": {
            "type": "string",
            "description": "ID de la conversación",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "sender": {
            "type": "string",
            "description": "Quién envía el mensaje",
            "example": "user",
            "enum": [
              "user",
              "bot",
              "system"
            ]
          },
          "text": {
            "type": "string",
            "description": "Texto del mensaje",
            "example": "Hola, necesito ayuda"
          },
          "messageType": {
            "type": "string",
            "description": "Tipo de mensaje",
            "example": "text",
            "enum": [
              "text",
              "image",
              "audio",
              "video",
              "document",
              "location"
            ],
            "default": "text"
          },
          "payload": {
            "type": "object",
            "description": "Payload adicional (archivos, coordenadas, etc)",
            "example": {
              "file_url": "https://...",
              "coordinates": {
                "lat": -34.6037,
                "lng": -58.3816
              }
            }
          },
          "externalMessageId": {
            "type": "string",
            "description": "ID del mensaje en el canal externo",
            "example": "12345"
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional"
          }
        },
        "required": [
          "conversationId",
          "sender",
          "text"
        ]
      },
      "CatalogItemResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "subtitle": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "sku": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "currency": {
            "type": "string"
          },
          "externalSystem": {
            "type": "string"
          },
          "externalId": {
            "type": "string"
          },
          "attributes": {
            "type": "object"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "imageUrl": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isActive": {
            "type": "boolean"
          },
          "isFeatured": {
            "type": "boolean"
          },
          "stock": {
            "type": "number"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "type",
          "title",
          "currency",
          "attributes",
          "tags",
          "images",
          "isActive",
          "isFeatured",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateCatalogItemDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo de item del catálogo",
            "example": "product",
            "enum": [
              "product",
              "service",
              "property",
              "course",
              "vehicle",
              "plan",
              "custom"
            ]
          },
          "title": {
            "type": "string",
            "description": "Título del item",
            "example": "iPhone 15 Pro Max"
          },
          "subtitle": {
            "type": "string",
            "description": "Subtítulo",
            "example": "256GB - Titanio Negro"
          },
          "description": {
            "type": "string",
            "description": "Descripción detallada",
            "example": "El iPhone más potente hasta la fecha con chip A17 Pro"
          },
          "sku": {
            "type": "string",
            "description": "SKU (código único del producto)",
            "example": "IPHONE-15-PRO-256-BLK"
          },
          "price": {
            "type": "number",
            "description": "Precio",
            "example": 1299.99
          },
          "currency": {
            "type": "string",
            "description": "Moneda (código ISO 4217)",
            "example": "USD",
            "default": "USD"
          },
          "externalSystem": {
            "type": "string",
            "description": "Sistema externo de origen",
            "example": "shopify"
          },
          "externalId": {
            "type": "string",
            "description": "ID en el sistema externo",
            "example": "prod_12345"
          },
          "attributes": {
            "type": "object",
            "description": "Atributos específicos del item",
            "example": {
              "color": "Negro",
              "storage": "256GB",
              "weight": "221g"
            }
          },
          "tags": {
            "description": "Etiquetas para búsqueda/filtrado",
            "example": [
              "smartphone",
              "apple",
              "flagship"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "imageUrl": {
            "type": "string",
            "description": "URL de imagen principal",
            "example": "https://example.com/images/iphone-15.jpg"
          },
          "images": {
            "description": "URLs de imágenes adicionales",
            "example": [
              "https://example.com/images/iphone-15-front.jpg",
              "https://example.com/images/iphone-15-back.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el item está activo",
            "default": true
          },
          "isFeatured": {
            "type": "boolean",
            "description": "Si el item está destacado",
            "default": false
          },
          "stock": {
            "type": "number",
            "description": "Stock disponible",
            "example": 50
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "warranty": "1 year",
              "supplier": "Apple Inc."
            }
          }
        },
        "required": [
          "type",
          "title"
        ]
      },
      "UpdateCatalogItemDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo de item del catálogo",
            "example": "product",
            "enum": [
              "product",
              "service",
              "property",
              "course",
              "vehicle",
              "plan",
              "custom"
            ]
          },
          "title": {
            "type": "string",
            "description": "Título del item",
            "example": "iPhone 15 Pro Max"
          },
          "subtitle": {
            "type": "string",
            "description": "Subtítulo",
            "example": "256GB - Titanio Negro"
          },
          "description": {
            "type": "string",
            "description": "Descripción detallada",
            "example": "El iPhone más potente hasta la fecha con chip A17 Pro"
          },
          "sku": {
            "type": "string",
            "description": "SKU (código único del producto)",
            "example": "IPHONE-15-PRO-256-BLK"
          },
          "price": {
            "type": "number",
            "description": "Precio",
            "example": 1299.99
          },
          "currency": {
            "type": "string",
            "description": "Moneda (código ISO 4217)",
            "example": "USD",
            "default": "USD"
          },
          "externalSystem": {
            "type": "string",
            "description": "Sistema externo de origen",
            "example": "shopify"
          },
          "externalId": {
            "type": "string",
            "description": "ID en el sistema externo",
            "example": "prod_12345"
          },
          "attributes": {
            "type": "object",
            "description": "Atributos específicos del item",
            "example": {
              "color": "Negro",
              "storage": "256GB",
              "weight": "221g"
            }
          },
          "tags": {
            "description": "Etiquetas para búsqueda/filtrado",
            "example": [
              "smartphone",
              "apple",
              "flagship"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "imageUrl": {
            "type": "string",
            "description": "URL de imagen principal",
            "example": "https://example.com/images/iphone-15.jpg"
          },
          "images": {
            "description": "URLs de imágenes adicionales",
            "example": [
              "https://example.com/images/iphone-15-front.jpg",
              "https://example.com/images/iphone-15-back.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el item está activo",
            "default": true
          },
          "isFeatured": {
            "type": "boolean",
            "description": "Si el item está destacado",
            "default": false
          },
          "stock": {
            "type": "number",
            "description": "Stock disponible",
            "example": 50
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "warranty": "1 year",
              "supplier": "Apple Inc."
            }
          }
        }
      },
      "KnowledgeDocumentResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "sourceType": {
            "type": "string"
          },
          "sourceUrl": {
            "type": "string"
          },
          "fileName": {
            "type": "string"
          },
          "fileSize": {
            "type": "number"
          },
          "mimeType": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "errorMessage": {
            "type": "string"
          },
          "chunksCount": {
            "type": "number"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object"
          },
          "processedAt": {
            "format": "date-time",
            "type": "string"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "type",
          "title",
          "content",
          "status",
          "chunksCount",
          "tags",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateKnowledgeDocumentDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo de documento",
            "example": "faq",
            "enum": [
              "faq",
              "product_catalog",
              "manual",
              "policy",
              "general"
            ]
          },
          "title": {
            "type": "string",
            "description": "Título del documento",
            "example": "Preguntas Frecuentes - Producto X"
          },
          "content": {
            "type": "string",
            "description": "Contenido completo del documento",
            "example": "Este es el contenido del documento..."
          },
          "sourceType": {
            "type": "string",
            "description": "Tipo de fuente del documento",
            "example": "manual",
            "enum": [
              "file",
              "url",
              "manual",
              "api"
            ]
          },
          "sourceUrl": {
            "type": "string",
            "description": "URL de la fuente (si aplica)",
            "example": "https://example.com/docs/faq.pdf"
          },
          "fileName": {
            "type": "string",
            "description": "Nombre del archivo (si aplica)",
            "example": "faq.pdf"
          },
          "fileSize": {
            "type": "number",
            "description": "Tamaño del archivo en bytes",
            "example": 1024000
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type del archivo",
            "example": "application/pdf"
          },
          "tags": {
            "description": "Tags para categorización",
            "example": [
              "faq",
              "soporte",
              "producto-x"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "author": "Juan Pérez",
              "department": "Support"
            }
          }
        },
        "required": [
          "type",
          "title",
          "content"
        ]
      },
      "UpdateKnowledgeDocumentDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo de documento",
            "example": "faq",
            "enum": [
              "faq",
              "product_catalog",
              "manual",
              "policy",
              "general"
            ]
          },
          "title": {
            "type": "string",
            "description": "Título del documento",
            "example": "Preguntas Frecuentes - Producto X"
          },
          "sourceType": {
            "type": "string",
            "description": "Tipo de fuente del documento",
            "example": "manual",
            "enum": [
              "file",
              "url",
              "manual",
              "api"
            ]
          },
          "sourceUrl": {
            "type": "string",
            "description": "URL de la fuente (si aplica)",
            "example": "https://example.com/docs/faq.pdf"
          },
          "fileName": {
            "type": "string",
            "description": "Nombre del archivo (si aplica)",
            "example": "faq.pdf"
          },
          "fileSize": {
            "type": "number",
            "description": "Tamaño del archivo en bytes",
            "example": 1024000
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type del archivo",
            "example": "application/pdf"
          },
          "tags": {
            "description": "Tags para categorización",
            "example": [
              "faq",
              "soporte",
              "producto-x"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "author": "Juan Pérez",
              "department": "Support"
            }
          },
          "status": {
            "type": "string",
            "description": "Estado del documento",
            "example": "completed",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ]
          },
          "errorMessage": {
            "type": "string",
            "description": "Mensaje de error (si el estado es failed)"
          }
        }
      },
      "FlowNodeSummaryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "label": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "type",
          "label"
        ]
      },
      "FlowResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "triggerKeywords": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "initialNodeId": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          },
          "version": {
            "type": "number"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          },
          "nodes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FlowNodeSummaryDto"
            }
          }
        },
        "required": [
          "id",
          "name",
          "slug",
          "isActive",
          "triggerKeywords",
          "metadata",
          "version",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateFlowDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del flujo",
            "example": "Ingreso de Proveedores"
          },
          "slug": {
            "type": "string",
            "description": "Slug único del flujo (usado para routing)",
            "example": "ingreso-proveedores",
            "pattern": "^[a-z0-9-]+$"
          },
          "description": {
            "type": "string",
            "description": "Descripción del flujo",
            "example": "Flujo para capturar datos de nuevos proveedores"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el flujo está activo",
            "default": true
          },
          "triggerKeywords": {
            "description": "Palabras clave que activan este flujo",
            "example": [
              "proveedor",
              "registro",
              "alta proveedor"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "category": "onboarding",
              "priority": "high"
            }
          }
        },
        "required": [
          "name",
          "slug"
        ]
      },
      "UpdateFlowDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del flujo",
            "example": "Ingreso de Proveedores"
          },
          "slug": {
            "type": "string",
            "description": "Slug único del flujo (usado para routing)",
            "example": "ingreso-proveedores",
            "pattern": "^[a-z0-9-]+$"
          },
          "description": {
            "type": "string",
            "description": "Descripción del flujo",
            "example": "Flujo para capturar datos de nuevos proveedores"
          },
          "isActive": {
            "type": "boolean",
            "description": "Si el flujo está activo",
            "default": true
          },
          "triggerKeywords": {
            "description": "Palabras clave que activan este flujo",
            "example": [
              "proveedor",
              "registro",
              "alta proveedor"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional",
            "example": {
              "category": "onboarding",
              "priority": "high"
            }
          },
          "initialNodeId": {
            "type": "string",
            "description": "ID del nodo inicial del flujo"
          }
        }
      },
      "FlowNodeResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "flowId": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "label": {
            "type": "string"
          },
          "config": {
            "type": "object"
          },
          "positionX": {
            "type": "number"
          },
          "positionY": {
            "type": "number"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "flowId",
          "type",
          "label",
          "config",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateFlowNodeDto": {
        "type": "object",
        "properties": {
          "flowId": {
            "type": "string",
            "description": "ID del flujo al que pertenece",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "type": {
            "type": "string",
            "description": "Tipo de nodo",
            "example": "message",
            "enum": [
              "message",
              "input",
              "decision",
              "llm",
              "api_call",
              "email",
              "webhook",
              "wait",
              "end"
            ]
          },
          "label": {
            "type": "string",
            "description": "Etiqueta descriptiva del nodo",
            "example": "Solicitar nombre del proveedor"
          },
          "config": {
            "type": "object",
            "description": "Configuración específica del nodo según su tipo",
            "example": {
              "text": "Bienvenido al sistema de proveedores",
              "buttons": [
                {
                  "text": "Continuar",
                  "value": "continue"
                }
              ]
            }
          },
          "positionX": {
            "type": "number",
            "description": "Posición X en el Flow Builder UI",
            "example": 100
          },
          "positionY": {
            "type": "number",
            "description": "Posición Y en el Flow Builder UI",
            "example": 200
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional"
          }
        },
        "required": [
          "flowId",
          "type",
          "label",
          "config"
        ]
      },
      "UpdateFlowNodeDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo de nodo",
            "example": "message",
            "enum": [
              "message",
              "input",
              "decision",
              "llm",
              "api_call",
              "email",
              "webhook",
              "wait",
              "end"
            ]
          },
          "label": {
            "type": "string",
            "description": "Etiqueta descriptiva del nodo",
            "example": "Solicitar nombre del proveedor"
          },
          "config": {
            "type": "object",
            "description": "Configuración específica del nodo según su tipo",
            "example": {
              "text": "Bienvenido al sistema de proveedores",
              "buttons": [
                {
                  "text": "Continuar",
                  "value": "continue"
                }
              ]
            }
          },
          "positionX": {
            "type": "number",
            "description": "Posición X en el Flow Builder UI",
            "example": 100
          },
          "positionY": {
            "type": "number",
            "description": "Posición Y en el Flow Builder UI",
            "example": 200
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional"
          }
        }
      },
      "FlowTransitionResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "flowId": {
            "type": "string"
          },
          "fromNodeId": {
            "type": "string"
          },
          "toNodeId": {
            "type": "string"
          },
          "label": {
            "type": "string"
          },
          "condition": {
            "type": "object"
          },
          "priority": {
            "type": "number"
          },
          "metadata": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "flowId",
          "fromNodeId",
          "toNodeId",
          "priority",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateFlowTransitionDto": {
        "type": "object",
        "properties": {
          "flowId": {
            "type": "string",
            "description": "ID del flujo",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "fromNodeId": {
            "type": "string",
            "description": "ID del nodo de origen",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "toNodeId": {
            "type": "string",
            "description": "ID del nodo de destino",
            "example": "123e4567-e89b-12d3-a456-426614174002"
          },
          "label": {
            "type": "string",
            "description": "Etiqueta de la transición (ej: \"Sí\", \"No\", \"Error\")",
            "example": "Sí"
          },
          "condition": {
            "type": "object",
            "description": "Condición para activar esta transición (para nodos de decisión)",
            "example": {
              "variable": "edad",
              "operator": ">",
              "value": 18
            }
          },
          "priority": {
            "type": "number",
            "description": "Prioridad de evaluación (mayor = primero)",
            "example": 10,
            "default": 0
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional"
          }
        },
        "required": [
          "flowId",
          "fromNodeId",
          "toNodeId"
        ]
      },
      "UpdateFlowTransitionDto": {
        "type": "object",
        "properties": {
          "label": {
            "type": "string",
            "description": "Etiqueta de la transición (ej: \"Sí\", \"No\", \"Error\")",
            "example": "Sí"
          },
          "condition": {
            "type": "object",
            "description": "Condición para activar esta transición (para nodos de decisión)",
            "example": {
              "variable": "edad",
              "operator": ">",
              "value": 18
            }
          },
          "priority": {
            "type": "number",
            "description": "Prioridad de evaluación (mayor = primero)",
            "example": 10,
            "default": 0
          },
          "metadata": {
            "type": "object",
            "description": "Metadata adicional"
          }
        }
      }
    }
  }
}